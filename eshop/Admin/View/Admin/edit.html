  <layout name="Index/header_foot"/>
  <div class="main-div">
      <form id="admin_form" method="post" name="theForm" enctype="multipart/form-data" >

              <table width="100%" style="margin:0 auto" id="general-table">
                    <input type="hidden" name="id" value="{$adminOne['id']}">
                    <tr>
                          <td class="label">管理员账号:</td>
                          <td><input type='text' name='admin_name' maxlength="20" value='{$adminOne["admin_name"]}' size='27' readonly /> <font color="red">*</font></td>
                    </tr>

                    <tr>
                          <td class="label">管理员名称:</td>
                          <td><input type='text' name='admin_nick' maxlength="20" value='{$adminOne["admin_nick"]}' size='27' /> <font color="red">*</font></td>
                    </tr>

                    <tr>
                          <td class="label">手机号码:</td>
                          <td><input type='text' name='tel' maxlength="20" value='{$adminOne["tel"]}' size='27' /> <font color="red">*</font></td>
                    </tr>

                    <tr>
                          <td class="label">电子邮箱:</td>
                          <td><input type='email' name='email' maxlength="20" value='{$adminOne["email"]}' size='27' /> <font color="red">*</font></td>
                    </tr>

                    <tr>
                          <td class="label">头像:</td>
                          <td id="localImag"><img id="preview" width="30" src="__ROOT__/Uploads/{$adminOne['icon']}" /><input type='file' name='icon' id="doc" onchange="setImagePreview()" /></td>
                    </tr>

              </table>
              <div class="button-div">
              <input type="submit" value=" 确定 " />
              <input type="reset" value=" 重置 " />
              </div>
      </form>
  </div>

<script type="text/javascript">
//下面用于图片上传预览功能
function setImagePreview(avalue) {
var docObj=document.getElementById("doc");
 
var imgObjPreview=document.getElementById("preview");
if(docObj.files &&docObj.files[0])
{
//火狐下，直接设img属性
imgObjPreview.style.display = 'inline-block';
imgObjPreview.style.width = '30px';
imgObjPreview.style.height = '30px'; 
//imgObjPreview.src = docObj.files[0].getAsDataURL();
 
//火狐7以上版本不能用上面的getAsDataURL()方式获取，需要一下方式
imgObjPreview.src = window.URL.createObjectURL(docObj.files[0]);
}
else
{
//IE下，使用滤镜
docObj.select();
var imgSrc = document.selection.createRange().text;
var localImagId = document.getElementById("localImag");
//必须设置初始大小
localImagId.style.width = "30px";
localImagId.style.height = "30px";
//图片异常的捕捉，防止用户修改后缀来伪造图片
try{
localImagId.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale)";
localImagId.filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src = imgSrc;
}
catch(e)
{
alert("您上传的图片格式不正确，请重新选择!");
return false;
}
imgObjPreview.style.display = 'none';
document.selection.empty();
}
return true;
}
 
</script>
